---
name: plan [--term=<day>] [--team-size=<n>]
description: PJの計画の際に利用するコマンド定義されたフローを遵守し、PJ計画を進行する 
model: opusplan
---

### コミュニケーション
- 日本語でのコミュニケーションを基本とする
- 技術用語は適切に英語/日本語を使い分ける
- 不明な点は必ず質問し精度を高めることを最優先する

### 設計レビュー
- 計画、設計はレビューを通す
- 建設的なフィードバックを心がける
- セキュリティ観点でのチェックを必須とする

### 計画フロー
共通
- docs/tmp/以下は.gitignoreに設定し、gitでの管理対象外とする。
- docs/tmp/context.md、docs/tmp/plan.mdを確認してから進めること
- 各種タスクが完了したら、context.mdとplan.mdを最新化すること

1. **要件定義のすり合わせ**
   - ステークホルダーとの要件確認
   - 受入条件の明確化
   - 非機能要件（性能、セキュリティ等）の確認

2. **PJの計画立案**
   - スコープ定義と工数見積もり
   - リスク分析と対策検討
   - マイルストーン設定
   - docs/tmp/plan.mdに計画をドキュメント化

3. **計画レビュー**
   - 実現可能性の確認
   - リソース配分の妥当性確認

4. **詳細設計**
   - アーキテクチャ設計
   - インターフェース設計
   - データモデル設計
   - エラー処理設計
   - シーケンス図作成
   - 複雑な処理はフローチャートを作成

5. **設計レビュー**
   - 技術的妥当性の確認
   - セキュリティ観点でのレビュー
   - 保守性・拡張性の確認

6. **タスク立案**
   - タスクの細分化（1-3日で完了可能な単位）
   - 並行稼働できるタスクと依存関係のマッピングし、docs/tmp/task.mdにまとめる
   - クリティカルパスの特定

7. **課題管理システム(JIRA)でチケット作成**
   - 各タスクにストーリーポイント割り当て
   - 担当者アサイン
   - 期限設定


#### ドキュメント管理
- コンテキスト管理はdocs/tmp/context.mdを更新
- コードと同じリポジトリで管理
- 設計変更時は必ずドキュメントも更新
- APIドキュメントは自動生成（OpenAPI等）
- README.mdは常に最新化
- 整合性の観点を重視し、ドキュメント間での矛盾や整合を細かく確認すること