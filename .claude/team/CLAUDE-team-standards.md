# チーム開発標準

このファイルはチーム固有の開発標準を定義します。

## チームルール

### コミュニケーション
- 日本語でのコミュニケーションを基本とする
- 技術用語は適切に英語/日本語を使い分ける
- 不明な点は必ず質問し精度を高めることを最優先する

### コードレビュー
- すべてのコードはレビューを通す
- 建設的なフィードバックを心がける
- セキュリティ観点でのチェックを必須とする

### 開発フロー
共通
- docs/tmp/以下は.gitignoreに設定し、gitでの管理対象外とする。
- docs/tmp/context.md、docs/tmp/plan.mdを確認してから進めること
- 各種タスクが完了したら、context.mdとplan.mdを最新化すること

1. **要件定義のすり合わせ**
   - ステークホルダーとの要件確認
   - 受入条件の明確化
   - 非機能要件（性能、セキュリティ等）の確認

2. **PJの計画立案**
   - スコープ定義と工数見積もり
   - リスク分析と対策検討
   - マイルストーン設定
   - docs/tmp/plan.mdに計画をドキュメント化

3. **計画レビュー**
   - 実現可能性の確認
   - リソース配分の妥当性確認

4. **詳細設計**
   - アーキテクチャ設計
   - インターフェース設計
   - データモデル設計
   - エラー処理設計
   - シーケンス図作成
   - 複雑な処理はフローチャートを作成

5. **設計レビュー**
   - 技術的妥当性の確認
   - セキュリティ観点でのレビュー
   - 保守性・拡張性の確認

6. **タスク立案**
   - タスクの細分化（1-3日で完了可能な単位）
   - 並行稼働できるタスクと依存関係のマッピングし、docs/tmp/task.mdにまとめる
   - クリティカルパスの特定

7. **課題管理システム(JIRA)でチケット作成**
   - 各タスクにストーリーポイント割り当て
   - 担当者アサイン
   - 期限設定

8. **開発ブランチ作成**
   - feature/[タスク番号]-[簡潔な説明] 形式
   - mainブランチから最新を取得

9. **TDD実装**
   - 失敗するテストを先に作成（Red）
   - 最小限の実装でテストを通す（Green）
   - コードをリファクタリング（Refactor）
   - 静的解析ツール実行（NullAway、PHPStan等）

10. **PRを作成してレビュー依頼**
　　- ghコマンドでPR作成
    - PR説明には変更内容と影響範囲を明記
    - セルフレビューチェックリスト確認
    - CI/CDパイプラインの成功確認

11. **コードレビュー**
    - 機能要件の充足確認
    - コード品質チェック
    - セキュリティレビュー
    - パフォーマンス観点の確認

12. **レビュー承認後にマージ**
    - Squash and mergeでコミット履歴を整理
    - マージ後の動作確認
    - 関連ドキュメントの更新

### 開発フローの補足事項

#### ブランチ戦略
- **main**: 本番環境相当（常にデプロイ可能な状態）
- **develop**: 開発環境（次回リリース予定の機能を統合）
- **feature/**: 機能開発用
- **bugfix/**: バグ修正用（developから分岐）
- **hotfix/**: 緊急修正用（mainから分岐）

#### 継続的インテグレーション
- コミット時に自動でテスト実行
- コードカバレッジ95%以上を維持
- 静的解析の警告はマージ前に解消
- セキュリティスキャンの実施

#### ドキュメント管理
- コンテキスト管理はtmp/context.mdを更新
- コードと同じリポジトリで管理
- 設計変更時は必ずドキュメントも更新
- APIドキュメントは自動生成（OpenAPI等）
- README.mdは常に最新化

#### 緊急時の対応フロー
1. hotfixブランチをmainから作成
2. 最小限の修正とテストを実施
3. 緊急レビュー（最低1名）
4. mainとdevelopの両方にマージ
5. 即座にデプロイとモニタリング

## 技術スタック標準

### 推奨ツール
- エディタ: VS Code / Cursor / IntelliJ IDEA
- バージョン管理: Git + GitHub/GitLab
- CI/CD: GitHub Actions / GitLab CI
- コンテナ: Docker
- オーケストレーション: Kubernetes (本番環境)

### コード品質管理
- リンター設定の共有
- フォーマッター設定の統一
- 静的解析ツールの活用
- 定期的なセキュリティスキャン

## プロジェクト構成標準

```
project/
├── .github/          # GitHub Actions設定
├── docs/             # ドキュメント
│   ├── api/         # API仕様書
│   ├── design/      # 設計書
│   └── guides/      # 開発ガイド
│   └── tmp/         # 生成AIのコンテキストや計画などを保持するための一時的なドキュメント
├── scripts/          # ユーティリティスクリプト
├── src/              # ソースコード
├── tests/            # テストコード
└── README.md         # プロジェクト概要
```

## 命名規則

### Git
- ブランチ: feature/XXX, bugfix/XXX, hotfix/XXX
- コミット: [種別] 簡潔な説明
  - feat: 新機能
  - fix: バグ修正
  - docs: ドキュメント
  - style: フォーマット
  - refactor: リファクタリング
  - test: テスト
  - chore: その他

### ファイル・ディレクトリ
- 言語の慣習に従う
- 一貫性を保つ
- 意味のある名前を付ける

---

このファイルは基本設定と組み合わせて使用されます。
