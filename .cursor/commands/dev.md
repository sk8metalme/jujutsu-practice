---
name: dev
description: PJの開発の際に利用するコマンド。定義されたフローを遵守し、PJ開発を進行する 
model: opusplan
---


### コミュニケーション
- 日本語でのコミュニケーションを基本とする
- 技術用語は適切に英語/日本語を使い分ける
- 不明な点は必ず質問し精度を高めることを最優先する

### コードレビュー
- すべてのコードはレビューを通す
- 建設的なフィードバックを心がける
- セキュリティ観点でのチェックを必須とする

### 開発フロー
共通
- docs/tmp/以下は.gitignoreに設定し、gitでの管理対象外とする。
- docs/tmp/context.md、docs/tmp/plan.mdを確認してから進めること
- 各種タスクが完了したら、context.mdとplan.mdを最新化すること

8. **開発ブランチ作成**
   - feature/[タスク番号]-[簡潔な説明] 形式
   - mainブランチから最新を取得

9. **TDD実装**
   - 失敗するテストを先に作成（Red）
   - 最小限の実装でテストを通す（Green）
   - コードをリファクタリング（Refactor）
     - 1回あたりのコードの変更行数は少なく保つこと(最大100行)
   - 静的解析ツール実行（NullAway、PHPStan等）
   - 簡易的な動作確認も実施

10. **PRを作成してレビュー依頼**
　　- ghコマンドでPR作成
    - PR説明には変更内容と影響範囲を明記
    - セルフレビューチェックリスト確認
    - CI/CDパイプラインの成功確認

11. **コードレビュー**
    - 機能要件の充足確認
    - コード品質チェック
    - セキュリティレビュー
    - パフォーマンス観点の確認

12. **レビュー承認後にマージ**
    - Squash and mergeでコミット履歴を整理
    - マージ後の動作確認
    - 関連ドキュメントの更新

### 開発フローの補足事項

#### ブランチ戦略
- **main**: 本番環境相当（常にデプロイ可能な状態）
- **develop**: 開発環境（次回リリース予定の機能を統合）
- **feature/**: 機能開発用
- **bugfix/**: バグ修正用（developから分岐）
- **hotfix/**: 緊急修正用（mainから分岐）

#### 継続的インテグレーション
- コミット時に自動でテスト実行
- コードカバレッジ95%以上を維持
- 静的解析の警告はマージ前に解消
- セキュリティスキャンの実施

#### ドキュメント管理
- コンテキスト管理はdocs/tmp/context.mdを更新
- コードと同じリポジトリで管理
- 設計変更時は必ずドキュメントも更新
- APIドキュメントは自動生成（OpenAPI等）
- README.mdは常に最新化